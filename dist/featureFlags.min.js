/*! Angular Feature Flags v1.1.0 Â© 2016 Michael Taranto */
!function(){function e(e,n,t,r){var a={},i=[],l=r,f=function(e){return a[l]&&a[l][e]},u=function(n){var t=e.defer();return t.resolve(n),t.promise},s=function(e){return n.isPresent(e)},o=function(e){return s(e)?"true"===n.get(e):f(e)},c=function(e){return f(e)},g=function(e){return angular.copy(e,i),i.forEach(function(e){angular.forEach(e.environments,function(n,t){a[t]||(a[t]={}),a[t][e.key]=n,e.environments[t]=o(e.key)})}),i},d=function(e){return e.then(function(e){return g(e.data||e)})},v=function(){return i},m=function(e){return angular.isArray(e)?u(g(e)):d(e)},O=function(e){l=e,n.setEnvironment(e)},y=function(e){n.set(e,!0)},k=function(e){n.set(e,!1)},F=function(e){n.remove(e)},h=function(){t&&m(t)};return h(),{set:m,get:v,enable:y,disable:k,reset:F,isOn:o,isOnByDefault:c,isOverridden:s,setEnvironment:O}}angular.module("feature-flags",[]),angular.module("feature-flags").directive("featureFlag",["featureFlags","$interpolate",function(e,n){return{transclude:"element",priority:599,terminal:!0,restrict:"A",$$tlb:!0,compile:function(t,r){var a="featureFlagHide"in r;return t[0].textContent=" featureFlag: "+r.featureFlag+" is "+(a?"on":"off")+" ",function(t,r,i,l,f){var u,s;t.$watch(function(){var r=n(i.featureFlag)(t);return e.isOn(r)},function(e){var n=a?!e:e;n?(s=t.$new(),f(s,function(e){u=e,r.after(u).remove()})):(s&&(s.$destroy(),s=null),u&&(u.after(r).remove(),u=null))})}}}}]),angular.module("feature-flags").directive("featureFlagOverrides",["featureFlags",function(e){return{restrict:"A",link:function(n){n.flags=e.get(),n.isOn=e.isOn,n.isOverridden=e.isOverridden,n.enable=e.enable,n.disable=e.disable,n.reset=e.reset,n.isOnByDefault=e.isOnByDefault},template:'<div class="feature-flags">    <h1>Feature Flags</h1>    <div id="feature-flag--{{flag.key}}" class="feature-flags-flag" ng-repeat="flag in flags">        <div class="feature-flags-name">{{flag.name || flag.key}}</div>        <div id="feature-flag--{{flag.key}}--enable" class="feature-flags-switch" ng-click="enable(flag.key)" ng-class="{\'active\': isOverridden(flag.key) && isOn(flag.key)}">ON</div>        <div id="feature-flag--{{flag.key}}--disable" class="feature-flags-switch" ng-click="disable(flag.key)" ng-class="{\'active\': isOverridden(flag.key) && !isOn(flag.key)}">OFF</div>        <div id="feature-flag--{{flag.key}}--reset" class="feature-flags-switch" ng-click="reset(flag.key)" ng-class="{\'active\': !isOverridden(flag.key)}">DEFAULT ({{isOnByDefault(flag.key) ? \'ON\' : \'OFF\'}})</div>        <div class="feature-flags-desc">{{flag.description}}</div>    </div></div>',replace:!0}}]),angular.module("feature-flags").service("featureFlagOverrides",["$rootElement",function(e){var n="",t=e.attr("ng-app"),r=function(e){return n+e},a=function(e){return 0===e.indexOf(n)},i=function(e){n="featureFlags."+t+"."+e+"."},l=function(e,n){localStorage.setItem(r(n),e)},f=function(e){return localStorage.getItem(r(e))},u=function(e){localStorage.removeItem(r(e))};return{isPresent:function(e){return null!==f(e)},setEnvironment:i,get:f,set:function(e,n){angular.isObject(e)?angular.forEach(e,l):l(n,e)},remove:u,reset:function(){var e;for(e in localStorage)a(e)&&localStorage.removeItem(e)}}}]),angular.module("feature-flags").provider("featureFlags",function(){var n=[],t="prod";this.setInitialFlags=function(e){n=e},this.setEnvironment=function(e){t=e},this.$get=["$q","featureFlagOverrides",function(r,a){return a.setEnvironment(t),new e(r,a,n,t)}]})}();